<!---------HOME | SLIDER ------------>
[wpv-layout-start]
  [wpv-items-found]
    <div class='row'>
  <div class='col-sm-12 col-md-8 col-md-offset-2'>
    <div id="home-slider">
    <ul class='slides'>
      <wpv-loop>
        <li>
                  <div class='row bg marg-top'>
                    [wpv-if type='wpcf-slide-type' evaluate="$type = 'image' "]
                    <div class="col-sm-6">

            <a href="[types field="button-url" output="raw"][/types]">
              <img src="[types field="image" size="medium" url="true" resize="proportional"][/types]" class="img-responsive">
            </a>
          </div>
          <div class='col-sm-6'>
                      <div class='slide-pad'>
            <h2>[types field="headline"][/types]</h2>
                    <a href='[types field="button-url" output="raw"][/types]' class='btn btn-click'>[types field="button-text"][/types]</a>
                    </div>
                  </div>
                [/wpv-if]
                [wpv-if type='wpcf-slide-type' evaluate="$type = 'video' "]
                    <div class='col-sm-12'>
                      <div class='vid-container'>
                        [types field="video-url"][/types]
                      </div>
                    </div>
                [/wpv-if]
                  </div>
                </li>
        </wpv-loop>
      </ul>
    </div>
  </div>
</div>
  [/wpv-items-found]
  [wpv-no-items-found]
    [wpml-string context="wpv-views"]<strong>No items found</strong>[/wpml-string]
  [/wpv-no-items-found]
[wpv-layout-end]



<!---------- DISCOGRAPHY | PAGE -------------->
[wpv-layout-start]
	[wpv-items-found]
	<!-- wpv-loop-start -->
	<div class='row'>
		<wpv-loop>
			<div class="col-sm-3">
				<a href="[wpv-post-url]">
					<div class="img-container">
						<img src="[wpv path to img]" class="img-responsive">
					</div>
					<h4>[wpv-post-title]</h4>
				</a>
			</div>
		</wpv-loop>
	</div>
	<!-- wpv-loop-end -->
	[/wpv-items-found]
	[wpv-no-items-found]
		[wpml-string context="wpv-views"]<strong>No items found</strong>[/wpml-string]
	[/wpv-no-items-found]
[wpv-layout-end]


<!------------ DISCOGRAPHY SINGLE ------------>
[wpv-layout-start]
  [wpv-items-found]
  <!-- wpv-loop-start -->
  <div class="row ">
    <div class="col-sm-12 disco-slider">
      [wpv-view name="discography-page"]
      <wpv-loop>
          <div class="row" id='[wpv-post-title]'>
            <div class="col-sm-6 col-md-5 col-md-push-1 col-lg-4 col-lg-push-2">
              <div class='vid-thumb album-img'>
              [types field="album-image" size="medium" align="none" resize="proportional" class="img-responsive"][/types]
              </div>
            </div>
            <div class="col-sm-6 col-md-5 col-md-push-1 col-lg-4 col-lg-push-2">
              <div class="spotify-player">
                [types field="spotify"][/types]
              </div>
            </div>
          </div>
        <div class='bg'>
          <div class="row">
            <div class="col-sm-12 album-copy ">
              <h2>[wpv-post-title] ([types field="release-date" style="text" format="Y"][/types])</h2>
              <p>[types field="description"][/types]</p>
            </div>
          </div>

        </div>
      </wpv-loop>

    </div>
  </div>
  <!-- wpv-loop-end -->
  [/wpv-items-found]
  [wpv-no-items-found]
    [wpml-string context="wpv-views"]<strong>No items found</strong>[/wpml-string]
  [/wpv-no-items-found]
[wpv-layout-end]


<!-------------- BLOG ROLL ---------------------->
[wpv-layout-start]
	[wpv-items-found]
	<!-- wpv-loop-start -->
	<div class="row">
		<wpv-loop>
			<div class="col-sm-3">
				<a href="[wpv-post-url]">
					<div class="blog-pad">
						[wpv-post-thumbnail size=thumbnail]
						<h3>[wpv-post-title]</h3>
					</div>
				</a>
			</div>
		</wpv-loop>
	</div>
	<!-- wpv-loop-end -->
	[/wpv-items-found]
	[wpv-no-items-found]
		[wpml-string context="wpv-views"]<strong>No posts found</strong>[/wpml-string]
	[/wpv-no-items-found]
[wpv-layout-end]


<!--------------Discog Single---------------->

[wpv-layout-start]
  [wpv-items-found]
  <!-- wpv-loop-start -->
  <div class="row ">
    <div class="col-sm-12 disco-slider">
      <wpv-loop>
          <div class="row" id='[wpv-post-title]'>
            <div class="col-md-7 col-md-push-5 col-lg-8 col-lg-push-4">

            </div>
            <div class="col-md-5 col-md-pull-7 col-lg-4 col-lg-pull-8">
              <div class="spotify-player">
                [types field="spotify"][/types]
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 album-copy">
              <h2>[wpv-post-title] ([types field="release-date" style="text" format="Y"][/types])</h2>
              <p>[types field="description"][/types]</p>
            </div>
          </div>
              <h3>More Albums</h3>
      [wpv-view name="discography-page" ids='[wpv-post-id]']
      </wpv-loop>

    </div>
  </div>
  <!-- wpv-loop-end -->
  [/wpv-items-found]
  [wpv-no-items-found]
    [wpml-string context="wpv-views"]<strong>No items found</strong>[/wpml-string]
  [/wpv-no-items-found]
[wpv-layout-end]


<!-------------SOME VIDEO VIEW------------>
[wpv-layout-start]
	[wpv-items-found]
	<!-- wpv-loop-start -->

          <div class="row">
	<div class='col-sm-12'>
		[wpv-view name='VIDEOS | ARCHIVE | FEATURED']
	</div>
</div>
<div class="row">
	<div class="col-sm-12">
      <h1 class='centered'>More Videos</h1>
      <div class='row video-list'>

        <wpv-loop>
			<div class='col-sm-3'>
				<a href="[wpv-post-url]">
				<div class="vid-thumb">
                	<div class='vid-desc'>
						[wpv-if thumb='wpcf-thumbnail-options' evaluate="$thumb = 1"]
							[wpv-post-featured-image attr='class=img-responsive' size='thumbnail']
						[/wpv-if]
						[wpv-if thumb='wpcf-thumbnail-options' evaluate="$thumb = 2"]
							[types field="custom-video-thumbnail" size="thumbnail" align="none" resize="proportional" class="img-responsive"][/types]
						[/wpv-if]
						<h3>[wpv-post-title]</h3>
					</div>
				</div>
				</a>
		</div>
	</wpv-loop>
</div>

	<!-- wpv-loop-end -->
	[/wpv-items-found]
	[wpv-no-items-found]
		[wpml-string context="wpv-views"]<strong>No posts found</strong>[/wpml-string]
	[/wpv-no-items-found]
[wpv-layout-end]

<!--reload scripts-->
<script>
var bodyClass = jQuery(dataa).find(body).prop('class');
for(i=0; i < bodyClass.length; i++){
jQuery(body).addClass(bodyClass[i]);
}
</script>



<!------------VIDEO BGS----------------->
[wpv-layout-start]
  [wpv-items-found]
  <!-- wpv-loop-start -->
<script>
  var VID = {}

VID.is_iDevice = function() {
      return (
        (navigator.platform.indexOf("iPhone") != -1) ||
        (navigator.platform.indexOf("iPod") != -1) ||
        (navigator.platform.indexOf("iPad") != -1) ||
        (navigator.platform.indexOf("armv7") != -1)
      );
    }

    var videoBG

      , isiPad = navigator.userAgent.match(/iPad/i) != null
      , videoIndex = 0
      , yoceans_channel =  {
    <wpv-loop>
          [wpv-item index=other]
[video-id url='[types field="youtube-video-id" output="raw"][/types]']:{"0":"[wpv-post-title]"},
          [wpv-item index=pad]
[video-id url='[types field="youtube-video-id" output="raw"][/types]']:{"0":"[wpv-post-title]"},

    </wpv-loop>
  }
  , yoceans_channel_array = []
      , yoceans_playlist = ''
      , count_vids = 0;

    for (vid_id in yoceans_channel) {
      yoceans_channel_array.push(vid_id);
      if(count_vids >= 1) {
        yoceans_playlist += vid_id + ',';
      }
      count_vids++;
    }


    var yoceans_playlist_Length = yoceans_playlist.length;
    yoceans_playlist = yoceans_playlist.slice(0,yoceans_playlist_Length-1);

  $('body').addClass("default");

    var player;

    function onYouTubePlayerAPIReady() {
      if ($(window).width() >= 767){
      $(function(){
        player = new YT.Player('player', {
        height: '100%',
        width: '100%',
        videoId: yoceans_channel_array[videoIndex],
        playlist: yoceans_playlist,
        playerVars: { 'autoplay': 1, 'controls': 0, 'showinfo' : 0, 'playlist' : yoceans_playlist, 'wmode' : 'transparent', html5: 1 },
        disablekb: 0,
        rel : 0,
        loop: 1,
        autoplay: 1,
        modestbranding: 1,
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange,
          'onError': onPlayerError
        },
        version: 3
      });
  });
    }
  }

    function change_iframe_player(index) {
      if( !videoBG || !videoBG.is('*') ) {
        return;
      }
      videoBG.html('<div id="player" style="position: absolute; width:100% ; height: 100%;"></div>');
      if(index > yoceans_channel_array.length - 1) {
        videoIndex = 0;
      }
      else if(index < 0) {
        videoIndex = yoceans_channel_array.length - 1;
      }

      videoBG.animate({ "opacity" : "0"},0);

      player = new YT.Player('player', {
        height: '100%',
        width: '100%',
        videoId: yoceans_channel_array[videoIndex],
        playerVars: { 'autoplay': 1, 'controls': 0, 'showinfo' : 0 html5: 1},
        disablekb: 0,
        rel : 0,
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange,
          'onError': onPlayerError
        },
        version: 3
      });
    }

    var active_video_id = null
      , a_scheme // active scheme
      , c_scheme
      , video_id;

    function onPlayerStateChange(event) {
      if( event.data == 1 ) {
        if( VID.is_iDevice() && ( $('#background_show.hidden').is('*') || $('#content_container.hidden').is('*') )) {
          $('#background_show').removeClass('hidden');
          $('#content_container').removeClass('hidden');
        }

      }

      // ended
      if(event.data == 0) {
        playNextVideo();
      }

      // paused
      if( event.data == 2 ) {
        $("#play_vid").show(0);
        $("#pause_vid").hide(0);
      }
    }
function onPlayerError(event){
    console.log('error occured ' + event);
    window.playNextVideo();
  };
    function onPlayerReady(event) {
      if (!isiPad) {
      player.setPlaybackQuality('highres');
      videoBG.animate({ "opacity" : "1"},5000);

        player.playVideo();
        player.mute();
        };
    }

  $.fn.center = function () {
    // changed to "fixed" from "absolute" to prevent video from scrolling -- will have to text this, as I'm sure it was absolute for a reason
    this.css("position","fixed");
    this.css("top", ( $(window).height() - this.height() ) / 2 + "px");
    this.css("left", ( $(window).width() - this.width() ) / 2 + "px");
    return this;
  }

  $.fn.fullScreen = function () {
    var min = {
      width : 955,
      height : 600
    };
    var win = {
      width : $(window).width() + ($(window).width() * .15),
      height : $(window).height() + ($(window).height() * .15)
    };
    var vid_width;
    var vid_height;

    var width_ratio;
    var height_ratio;

    function gcd(a, b) {
      return (b == 0) ? a : gcd (b, a%b);
    }

    var ratio = gcd(955, 600);
    wr = 955 / ratio;
    hr = 600 / ratio;

    if(Math.round((win.width/wr)*hr) > win.height) {
      if( win.width > min.width ) {
        this.width( win.width );
        this.height( Math.round((win.width/wr)*hr) );
      }
      else {
        this.width( min.width );
        this.height( min.height );
      }
    }
    else {
      if( win.height > min.height ) {
        this.height( win.height );
        this.width( Math.round((win.height/hr)*wr) );
      }
      else {
        this.width( min.width );
        this.height( min.height );
      }
    }
    return this;
  }

window.playNextVideo = function() {
        if (isiPad) {
            videoIndex++;
            change_iframe_player(videoIndex);
        } else if (videoIndex >= yoceans_channel_array.length - 1) {
            videoIndex = 0;
        player.loadVideoById(window.yoceans_channel_array[videoIndex]);
        } else {
            videoIndex++;
            player.loadVideoById(window.yoceans_channel_array[videoIndex], 'hd1080');
        }
    };
</script>
  <!-- wpv-loop-end -->
  [/wpv-items-found]



<!-----------VIDEO IDS------------>
<wpv-loop>
 var vid_id[wpv-post-index] = window.youtube_parser([types field="youtube-video-id" output="raw"][/types]);

    </wpv-loop>



<!------------ RESOURCES  ------------>
<div class='row'>
  <div class='col-sm-12'>
    <div class="song-lists 2-col">
      <ul class="song-sheets">
        <wpv-loop>
          <li class='song-sheet'><a href="[wpv-post-url]">[wpv-post-title]</a></li>
        </wpv-loop>
      </ul>
    </div>
  </div>
</div>
<div class='row'>
  <div class='col-sm-12'>
    <h1 class='centered'>Licensing</h1>
    <h3>For licensing, bulk order, and related inquiries contact <a href='mailto:licensing@streettalkmedia.com'>licensing@streettalkmedia.com</a></h3>
  </div>
</div>
