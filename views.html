<!---------HOME | SLIDER ------------>
[wpv-layout-start]
	[wpv-items-found]
		<div class='row'>
	<div class='col-sm-12'>
		<div id="home-slider">
		<ul class='slides'>
			<wpv-loop>
				<li>
                  <div class='row'>
					<div class="col-sm-6">

	                  [wpv-if type='wpcf-slide-type' evaluate="$type = 'image' "]
						<a href="[types field="button-url" output="raw"][/types]">
							<img src="[types field="image" size="medium" url="true" resize="proportional"][/types]" class="img-responsive">
						</a>
					</div>
					<div class='col-sm-6'>
						<h3>[types field="headline"][/types]</h3>
	                  <a href='[types field="button-url" output="raw"][/types]' class='btn btn-click'>[types field="button-text"][/types]</a>
					</div>
	              [/wpv-if]
	              [wpv-if type='wpcf-slide-type' evaluate="$type = 'video' "]
	              	<div class='col-sm-12'>
	                  <div class='vid-container'>
	                    [types field="video-url"][/types]
	                  </div>
	              </div>
	              [/wpv-if]
                  </div>
	              </li>
				</wpv-loop>
			</ul>
		</div>
	</div>
</div>
	[/wpv-items-found]
	[wpv-no-items-found]
		[wpml-string context="wpv-views"]<strong>No items found</strong>[/wpml-string]
	[/wpv-no-items-found]
[wpv-layout-end]


<!---------- DISCOGRAPHY | PAGE -------------->
[wpv-layout-start]
	[wpv-items-found]
	<!-- wpv-loop-start -->
	<div class='row'>
		<wpv-loop>
			<div class="col-sm-3">
				<a href="[wpv-post-url]">
					<div class="img-container">
						<img src="[wpv path to img]" class="img-responsive">
					</div>
					<h4>[wpv-post-title]</h4>
				</a>
			</div>
		</wpv-loop>
	</div>
	<!-- wpv-loop-end -->
	[/wpv-items-found]
	[wpv-no-items-found]
		[wpml-string context="wpv-views"]<strong>No items found</strong>[/wpml-string]
	[/wpv-no-items-found]
[wpv-layout-end]


<!------------ DISCOGRAPHY SINGLE ------------>
[wpv-layout-start]
	[wpv-items-found]
	<!-- wpv-loop-start -->
	<div class="row ">
		<div class="col-sm-12 disco-slider">
			<wpv-loop>
					<div class="row" id='[wpv-post-title]'>
						<div class="col-sm-8 col-sm-push-3">
							<h2>[wpv-post-title] ([types field="release-date" style="text" format="Y"][/types])</h2>
							<p>[types field="description"][/types]</p>
						</div>
						<div class="col-sm-4 col-sm-pull-8">
							<div class="spotify-player">
								[types field="spotify"][/types]
							</div>
						</div>
					</div>
              <h3>More Albums</h3>
			[wpv-view name="discography-page" ids='[wpv-post-id]']
			</wpv-loop>

		</div>
	</div>
	<!-- wpv-loop-end -->
	[/wpv-items-found]
	[wpv-no-items-found]
		[wpml-string context="wpv-views"]<strong>No items found</strong>[/wpml-string]
	[/wpv-no-items-found]
[wpv-layout-end]


<!-------------- BLOG ROLL ---------------------->
[wpv-layout-start]
	[wpv-items-found]
	<!-- wpv-loop-start -->
	<div class="row">
		<wpv-loop>
			<div class="col-sm-3">
				<a href="[wpv-post-url]">
					<div class="blog-pad">
						[wpv-post-thumbnail size=thumbnail]
						<h3>[wpv-post-title]</h3>
					</div>
				</a>
			</div>
		</wpv-loop>
	</div>
	<!-- wpv-loop-end -->
	[/wpv-items-found]
	[wpv-no-items-found]
		[wpml-string context="wpv-views"]<strong>No posts found</strong>[/wpml-string]
	[/wpv-no-items-found]
[wpv-layout-end]

[wpv-layout-start]
	[wpv-items-found]
	<!-- wpv-loop-start -->
	<div class="row ">
		<div class="col-sm-12 disco-slider">
					<div class="row" id='[wpv-post-title]'>
						<div class="col-sm-8 col-sm-push-3">
							<h2>[wpv-post-title] ([types field="release-date" style="text" format="Y"][/types])</h2>
							<p>[types field="description"][/types]</p>
						</div>
						<div class="col-sm-4 col-sm-pull-8">
							<div class="spotify-player">
								[types field="spotify"][/types]
							</div>
						</div>
					</div>
          <div class='disco-nav'>
            [wpv-prev-disco]
            [wpv-next-disco]
          </div>
          <h3>More Albums</h3>
          [wpv-view name="DISCOGRAPHY | PAGE"]
          <p class='hidden' id='vidBG'>
            	[types field="background-video" output="raw"][/types]
          </p>
				<script>


      </script>

		</div>
	</div>
[wpv-layout-start]
	[wpv-items-found]
	<!-- wpv-loop-start -->

          <div class="row">
	<div class='col-sm-12'>
		[wpv-view name='VIDEOS | ARCHIVE | FEATURED']
	</div>
</div>
<div class="row">
	<div class="col-sm-12">
      <h1 class='centered'>More Videos</h1>
      <div class='row video-list'>

        <wpv-loop>
			<div class='col-sm-3'>
				<a href="[wpv-post-url]">
				<div class="vid-thumb">
                	<div class='vid-desc'>
						[wpv-if thumb='wpcf-thumbnail-options' evaluate="$thumb = 1"]
							[wpv-post-featured-image attr='class=img-responsive' size='thumbnail']
						[/wpv-if]
						[wpv-if thumb='wpcf-thumbnail-options' evaluate="$thumb = 2"]
							[types field="custom-video-thumbnail" size="thumbnail" align="none" resize="proportional" class="img-responsive"][/types]
						[/wpv-if]
						<h3>[wpv-post-title]</h3>
					</div>
				</div>
				</a>
		</div>
	</wpv-loop>
</div>

	<!-- wpv-loop-end -->
	[/wpv-items-found]
	[wpv-no-items-found]
		[wpml-string context="wpv-views"]<strong>No posts found</strong>[/wpml-string]
	[/wpv-no-items-found]
[wpv-layout-end]

<!--reload scripts-->
<script>
var bodyClass = jQuery(dataa).find(body).prop('class');
for(i=0; i < bodyClass.length; i++){
jQuery(body).addClass(bodyClass[i]);
}
</script>



<!------------VIDEO BGS----------------->
[wpv-layout-start]
	[wpv-items-found]
	<!-- wpv-loop-start -->
<script>
  var VID = {}
VID.is_iDevice = function() {
      return (
        (navigator.platform.indexOf("iPhone") != -1) ||
        (navigator.platform.indexOf("iPod") != -1) ||
        (navigator.platform.indexOf("iPad") != -1) ||
        (navigator.platform.indexOf("armv7") != -1)
      );
    }
    var videoBG

      , isiPad = navigator.userAgent.match(/iPad/i) != null
      , videoIndex = 0
      , yoceans_channel =  {
		<wpv-loop>
          [wpv-item index=other]
 "[types field="youtube-video-id" output="raw"][/types]":{"0":"[wpv-post-title]"},
          [wpv-item index=pad]
 "[types field="youtube-video-id" output="raw"][/types]":{"0":"[wpv-post-title]"}

		</wpv-loop>
  }
  ,	yoceans_channel_array = []
      , yoceans_playlist = ''
      , count_vids = 0;

    for (vid_id in yoceans_channel) {
      yoceans_channel_array.push(vid_id);
      if(count_vids >= 1) {
        yoceans_playlist += vid_id + ',';
      }
      count_vids++;
    }


    var yoceans_playlist_Length = yoceans_playlist.length;
    yoceans_playlist = yoceans_playlist.slice(0,yoceans_playlist_Length-1);

	$('body').addClass("default");

    var player;

    function onYouTubePlayerAPIReady() {
      $(function(){
player = new YT.Player('player', {
        height: '100%',
        width: '100%',
        videoId: yoceans_channel_array[videoIndex],
        playlist: yoceans_playlist,
        playerVars: { 'autoplay': 1, 'controls': 0, 'showinfo' : 0, 'playlist' : yoceans_playlist, 'wmode' : 'transparent', 'loop': 1, },
        disablekb: 0,
        rel : 0,
        loop: 1,
        autoplay: 1,
        modestbranding: 1,
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        },
        version: 3
      });
	});
    }

    function change_iframe_player(index) {
      if( !videoBG || !videoBG.is('*') ) {
        return;
      }
      videoBG.html('<div id="player" style="position: absolute; width:100% ; height: 100%;"></div>');
      debugger;
      if(index > yoceans_channel_array.length - 1) {
        videoIndex = 0;
      }
      else if(index < 0) {
        videoIndex = yoceans_channel_array.length - 1;
      }

      videoBG.animate({ "opacity" : "0"},0);

      player = new YT.Player('player', {
        height: '100%',
        width: '100%',
        videoId: yoceans_channel_array[videoIndex],
        playerVars: { 'autoplay': 1, 'controls': 0, 'showinfo' : 0},
        disablekb: 0,
        rel : 0,

        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        },
        version: 3
      });
    }

    var active_video_id = null
      , a_scheme // active scheme
      , c_scheme
      , video_id;

    function onPlayerStateChange(event) {
      if( event.data == 1 ) {
        if( VID.is_iDevice() && ( $('#background_show.hidden').is('*') || $('#content_container.hidden').is('*') )) {
          $('#background_show').removeClass('hidden')
          $('#content_container').removeClass('hidden');
        }

      }

      // ended
      if(event.data == 0) {
        window.playNextVideo();
      }

      // paused
      if( event.data == 2 ) {
        $("#play_vid").show(0);
        $("#pause_vid").hide(0);
      }
    }

    function onPlayerReady(event) {
      videoBG.animate({ "opacity" : "1"},5000);

      if(!isiPad) {
        player.playVideo();
        player.mute();
      }
    }

  $.fn.center = function () {
    // changed to "fixed" from "absolute" to prevent video from scrolling -- will have to text this, as I'm sure it was absolute for a reason
    this.css("position","fixed");
    this.css("top", ( $(window).height() - this.height() ) / 2 + "px");
    this.css("left", ( $(window).width() - this.width() ) / 2 + "px");
    return this;
  }

  $.fn.fullScreen = function () {
    var min = {
      width : 955,
      height : 600
    };
    var win = {
      width : $(window).width() + ($(window).width() * .15),
      height : $(window).height() + ($(window).height() * .15)
    };
    var vid_width;
    var vid_height;

    var width_ratio;
    var height_ratio;

    function gcd(a, b) {
      return (b == 0) ? a : gcd (b, a%b);
    }

    var ratio = gcd(955, 600);
    wr = 955 / ratio;
    hr = 600 / ratio;

    if(Math.round((win.width/wr)*hr) > win.height) {
      if( win.width > min.width ) {
        this.width( win.width );
        this.height( Math.round((win.width/wr)*hr) );
      }
      else {
        this.width( min.width );
        this.height( min.height );
      }
    }
    else {
      if( win.height > min.height ) {
        this.height( win.height );
        this.width( Math.round((win.height/hr)*wr) );
      }
      else {
        this.width( min.width );
        this.height( min.height );
      }
    }
    return this;
  }
window.playNextVideo = function() {
        if (isiPad) {
            videoIndex++;
            change_iframe_player(videoIndex);
        } else if (videoIndex >= yoceans_channel_array.length - 1) {
            videoIndex = 0;
    		player.nextVideo()
        } else {
            videoIndex++;
            player.nextVideo()
        }
    };

</script>
	<!-- wpv-loop-end -->
	[/wpv-items-found]
	[wpv-no-items-found]
		[wpml-string context="wpv-views"]<strong>No items found</strong>[/wpml-string]
	[/wpv-no-items-found]
[wpv-layout-end]
